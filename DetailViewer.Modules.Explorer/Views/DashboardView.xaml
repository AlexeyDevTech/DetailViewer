<UserControl
    x:Class="DetailViewer.Modules.Explorer.Views.DashboardView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:DetailViewer.Modules.Explorer.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:DetailViewer.Core.Models;assembly=DetailViewer.Core"
    xmlns:prism="http://prismlibrary.com/"
    d:DesignHeight="600"
    d:DesignWidth="1000"
    prism:ViewModelLocator.AutoWireViewModel="True"
    Background="{StaticResource BackgroundLightBrush}"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converters:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  1. Панель инструментов  -->
        <ToolBar Grid.Row="0" Padding="5">
            <Button Command="{Binding FillFormCommand}" Style="{StaticResource ToolBarButtonStyle}">
                <StackPanel Orientation="Horizontal">
                    <ContentControl
                        Width="16"
                        Height="16"
                        Margin="0,0,5,0"
                        Content="{StaticResource IconAdd}" />
                    <TextBlock VerticalAlignment="Center" Text="Заполнить форму" />
                </StackPanel>
            </Button>

            <Button Command="{Binding LoadDataCommand}" Style="{StaticResource ToolBarButtonStyle}">
                <StackPanel Orientation="Horizontal">
                    <ContentControl
                        Width="16"
                        Height="16"
                        Margin="0,0,5,0"
                        Content="{StaticResource IconLoad}" />
                    <TextBlock VerticalAlignment="Center" Text="Загрузить данные" />
                </StackPanel>
            </Button>
            <Button Command="{Binding SaveDataCommand}" Style="{StaticResource ToolBarButtonStyle}">
                <StackPanel Orientation="Horizontal">
                    <ContentControl
                        Width="16"
                        Height="16"
                        Margin="0,0,5,0"
                        Content="{StaticResource IconSave}" />
                    <TextBlock VerticalAlignment="Center" Text="Сохранить данные" />
                </StackPanel>
            </Button>
        </ToolBar>

        <!--  2. Основная рабочая область  -->
        <Grid Grid.Row="1" Margin="5">
            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <!--  Правая панель с данными  -->
            <DataGrid
                Grid.Column="1"
                Margin="5,0,0,0"
                ItemsSource="{Binding DocumentRecords}">
                <DataGrid.Columns>
                    <DataGridTextColumn
                        Width="100"
                        Binding="{Binding Date, StringFormat='{}{0:dd.MM.yyyy}'}"
                        Header="Дата" />
                    <DataGridTextColumn
                        Width="150"
                        Binding="{Binding ESKDNumber.FullCode}"
                        Header="ЕСКД номер" />
                    <DataGridTextColumn
                        Width="100"
                        Binding="{Binding YASTCode}"
                        Header="ЯСТ код" />
                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding Name}"
                        Header="Имя" />
                    <DataGridTextColumn
                        Width="150"
                        Binding="{Binding AssemblyNumber}"
                        Header="Номер сборки" />
                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding AssemblyName}"
                        Header="Имя сборки" />
                    <DataGridTextColumn
                        Width="150"
                        Binding="{Binding ProductNumber}"
                        Header="Номер продукта" />
                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding ProductName}"
                        Header="Имя продукта" />
                    <DataGridTextColumn
                        Width="150"
                        Binding="{Binding FullName}"
                        Header="Полное имя" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!--  3. Статус бар  -->
        <StatusBar Grid.Row="2">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusText}" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <ProgressBar
                    Width="100"
                    Height="15"
                    IsIndeterminate="True"
                    Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibilityConverter}}" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</UserControl>