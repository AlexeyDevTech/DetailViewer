<Window
    x:Class="DetailViewer.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:prism="http://prismlibrary.com/"
    Title="{Binding Title}"
    Width="1470"
    Height="550"
    prism:ViewModelLocator.AutoWireViewModel="True"
    Background="{StaticResource BackgroundLightBrush}"
    Icon="{StaticResource AppIconImage}">
    <Grid>
        <DockPanel>
            <!--  Header  -->
            <Border
                Background="{StaticResource BackgroundWhiteBrush}"
                BorderBrush="{StaticResource BorderLightBrush}"
                BorderThickness="0,0,0,1"
                DockPanel.Dock="Top">
                <Grid Height="40">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Navigation Buttons  -->
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Button
                            Margin="10,0,0,0"
                            Command="{Binding NavigateCommand}"
                            CommandParameter="ExplorerView"
                            Content="Реестр"
                            Style="{StaticResource ToolBarButtonStyle}" />
                        <!--  Add other navigation buttons here  -->
                    </StackPanel>

                    <!--  User Profile Section  -->
                    <StackPanel
                        Grid.Column="1"
                        Margin="0,0,10,0"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,15,0"
                            VerticalAlignment="Center"
                            Foreground="{StaticResource ForegroundDarkBrush}"
                            Text="{Binding ActiveUserFullName}" />

                        <Button
                            Width="30"
                            Height="30"
                            Style="{StaticResource ToolBarButtonStyle}">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Grid>
                                        <Ellipse Fill="{StaticResource PrimaryAccentBrush}" />
                                        <TextBlock
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            FontWeight="Bold"
                                            Foreground="{StaticResource PrimaryAccentForegroundBrush}"
                                            Text="{Binding ActiveUserFullName[0]}" />
                                    </Grid>
                                </ControlTemplate>
                            </Button.Template>
                            <Button.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Command="{Binding ShowSettingsCommand}" Header="Настройки" />
                                    <MenuItem Command="{Binding ShowAboutCommand}" Header="О программе" />
                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Main Content  -->
            <ContentControl prism:RegionManager.RegionName="ContentRegion" />
        </DockPanel>
    </Grid>
</Window>