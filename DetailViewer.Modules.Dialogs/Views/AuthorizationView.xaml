<UserControl
    x:Class="DetailViewer.Modules.Dialogs.Views.AuthorizationView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DetailViewer.Modules.Dialogs"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    Width="500"
    Height="600"
    d:DesignHeight="500"
    d:DesignWidth="500"
    prism:ViewModelLocator.AutoWireViewModel="True"
    mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/DetailViewer;component/ModernStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid Background="{StaticResource BackgroundLightBrush}">
        <TabControl SelectedIndex="{Binding SelectedTabIndex}">
            <TabItem Header="Вход">
                <StackPanel
                    Width="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <Path
                        Width="80"
                        Height="80"
                        Margin="0,20,0,10"
                        Data="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,8V6A6,6 0 0,0 6,6V8H4V20H20V8H18M8,6A4,4 0 0,1 16,6V8H8V6Z"
                        Fill="{StaticResource PrimaryAccentBrush}"
                        Stretch="Uniform" />
                    <TextBlock
                        Margin="0,0,0,20"
                        HorizontalAlignment="Center"
                        FontFamily="Segoe UI Light"
                        FontSize="22"
                        Text="Авторизация" />

                    <TextBlock Margin="0,10,0,5" Text="Пользователь:" />
                    <ComboBox
                        Margin="0,0,0,10"
                        DisplayMemberPath="FullName"
                        ItemsSource="{Binding Profiles}"
                        SelectedItem="{Binding SelectedProfile}" />
                    <TextBlock Margin="0,10,0,5" Text="Пароль:" />
                    <PasswordBox local:PasswordBoxHelper.BoundPassword="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,20" Height="32"/>
                    <Border
                        Margin="0,0,0,10"
                        Padding="10"
                        CornerRadius="3">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="Visibility" Value="Visible" />
                                <Setter Property="Background" Value="#D4EDDA" />
                                <Setter Property="BorderBrush" Value="#C3E6CB" />
                                <Setter Property="BorderThickness" Value="1" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsError}" Value="True">
                                        <Setter Property="Background" Value="#F8D7DA" />
                                        <Setter Property="BorderBrush" Value="#F5C6CB" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding StatusMessage}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding StatusMessage}" Value="">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <TextBlock Text="{Binding StatusMessage}" TextWrapping="Wrap" />
                    </Border>

                    <Button
                        Margin="5"
                        Command="{Binding AuthorizeCommand}"
                        Content="Войти"
                        IsDefault="True"
                        Style="{StaticResource PrimaryButtonStyle}" />
                </StackPanel>
            </TabItem>
            <TabItem Header="Регистрация">
                <StackPanel
                    Width="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <Path
                        Width="80"
                        Height="80"
                        Margin="0,20,0,10"
                        Data="M15,12C12.24,12 10,9.76 10,7C10,4.24 12.24,2 15,2C17.76,2 20,4.24 20,7C20,9.76 17.76,12 15,12M5,14V17H2V19H5V22H7V19H10V17H7V14H5M15,14C18.33,14 23,15.67 23,17V20H7V17C7,15.67 11.67,14 15,14Z"
                        Fill="{StaticResource PrimaryAccentBrush}"
                        Stretch="Uniform" />
                    <TextBlock
                        Margin="0,0,0,20"
                        HorizontalAlignment="Center"
                        FontFamily="Segoe UI Light"
                        FontSize="22"
                        Text="Регистрация" />

                    <TextBlock Margin="0,10,0,5" Text="Фамилия:" />
                    <TextBox Margin="0,0,0,10" Text="{Binding NewLastName}" />
                    <TextBlock Margin="0,10,0,5" Text="Имя:" />
                    <TextBox Margin="0,0,0,10" Text="{Binding NewFirstName}" />
                    <TextBlock Margin="0,10,0,5" Text="Отчество:" />
                    <TextBox Margin="0,0,0,10" Text="{Binding NewMiddleName}" />
                    <TextBlock Margin="0,10,0,5" Text="Пароль:" />
                    <PasswordBox local:PasswordBoxHelper.BoundPassword="{Binding NewPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,20" Height="32"/>
                    <Button
                        Margin="5"
                        Command="{Binding RegisterCommand}"
                        Content="Зарегистрироваться"
                        IsDefault="True"
                        Style="{StaticResource PrimaryButtonStyle}" />
                </StackPanel>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>